<template>
  <main>
    <section>
      <div class="bg-light">
        <div class="container">
          <div class="py-3 py-lg-5">
            <span class="badge bg-secondary-800 mb-2 px-3">魔法科技</span>
            <h1
              class="h3 fw-bolder ls-sm mb-3 text-dark">
              拍出會動的照片｜LivePhotos 魔法拍立得
            </h1>
            <div class="row">
              <div class="col-lg-7">
                <img
                  class="img-fluid rounded-md mb-3 mb-md-0"
                  src="https://hexschool.github.io/boootstrap5WebLayout/assets/produt_image.jpg" alt="image">
              </div>
              <div class="col-lg-5">
                <span class="text-secondary ls-xs">
                  目標 $600,000
                </span>
                <h3
                  class="fs-2 mt-2 mb-3 ls-xs fw-bold text-dark">
                  $280,047
                </h3>
                <div class="progress rounded-pill mb-4">
                  <div
                      class="progress-bar bg-yellow rounded-pill text-dark"
                      role="progressbar"
                      style="width: 41%;"
                      aria-valuenow="41"
                      aria-valuemin="0"
                      aria-valuemax="100">41%</div>
                </div>
                <div class="row">
                  <div class="col">
                    <span class="text-secondary">贊助人數</span>
                    <p class="fs-3 fw-bold text-dark-700">1374 人</p>
                  </div>
                  <div class="col">
                    <span class="text-secondary">募資倒數</span>
                    <p class="fs-3 fw-bold text-dark-700">27 天</p>
                  </div>
                  <div class="col-12 mt-3">
                    <div class="row g-0 justify-content-between justify-content-md-start">
                      <div class="col-auto">
                        <div
                          class="link-dark text-decoration-none"
                          data-toggle="tooltip"
                          data-bs-placement="top"
                          title="認證標章"
                          data-bs-customClass="mytooltip"
                        >
                          <img src="https://ecjia.com.tw/demo/bs5_homework_0526/assets/xunzhang.svg" alt="" class="me-md-4" />
                          <small class="d-md-none align-bottom">認證標章</small>
                        </div>
                      </div>
                      <div class="col-auto">
                        <div
                          class="link-dark text-decoration-none"
                          data-toggle="tooltip"
                          data-bs-placement="top"
                          title="品質保證"
                          data-bs-customClass="mytooltip"
                        >
                          <img src="https://ecjia.com.tw/demo/bs5_homework_0526/assets/dianzan.svg" alt="" class="me-md-4" />
                          <small class="d-md-none align-bottom">品質保證</small>
                        </div>
                      </div>
                      <div class="col-auto">
                        <div
                          class="link-dark text-decoration-none"
                          data-toggle="tooltip"
                          data-bs-placement="top"
                          title="原生創意"
                          data-bs-customClass="mytooltip"
                        >
                          <img src="https://ecjia.com.tw/demo/bs5_homework_0526/assets/tishi.svg" alt="" class="me-md-4" />
                          <small class="d-md-none align-bottom">原生創意</small>
                        </div>
                      </div>
                      <div class="col-auto">
                        <div
                          class="link-dark text-decoration-none"
                          data-toggle="tooltip"
                          data-bs-placement="top"
                          title="人氣王"
                          data-bs-customClass="mytooltip"
                        >
                          <img src="https://ecjia.com.tw/demo/bs5_homework_0526/assets/huangguan.svg" alt="" class="me-md-4" />
                          <small class="d-md-none align-bottom">人氣王</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="border-start border-2 border-warning ps-2 py-2 my-lg-4 my-3 bg-white">
                      <p class="mb-0 text-secondary-600 fw-bold">
                        專案募資中！
                        <br>
                        在 2021/06/14 23:59 募資結束前，您都可以贊助此計畫。
                      </p>
                    </div>
                    <button
                      class="btn btn-yellow rounded-pill btn-lg w-100 mb-3 fs-5">
                      贊助專案
                    </button>
                    <div class="row g-2 mb-3 mb-md-0">
                      <div class="col-7">
                        <button
                          class="btn btn-outline-secondary btn-lg w-100 rounded-pill">
                          <i class="fas fa-heart custom-heart"></i>
                          追蹤專案
                        </button>
                      </div>
                      <div class="col">
                        <button
                          class="btn btn-outline-secondary btn-lg rounded-pill w-100 rounded-pill">
                          <i class="fas fa-share-alt"></i>
                          分享
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <nav
      class="shadow-sm bg-body rounded position-sticky top-0"
      style="z-index: 999">
      <div class="container">
        <ul
          class="navbar nav
          navbar-expand-lg 
          d-md-flex justify-content-between 
          justify-content-md-start
          ps-0 py-0"
          role="tablist"
          aria-orientation="vertical">
          <li class="nav-item">
            <a
              id="info-tab"
              class="nav-link link-dark py-3 active"
              data-bs-toggle="tab"
              href="#info"
              data-bs-target="#info"
              role="tab"
              aria-controls="info"
              aria-selected="false">
              專案介紹
            </a>
          </li>
          <li class="nav-item">
            <a
              id="news-tab"
              class="nav-link link-dark py-3"
              data-bs-toggle="tab"
              href="#news"
              role="tab"
              data-bs-target="#news"
              aria-controls="news"
              aria-selected="false">
              最新消息
            </a>
          </li>
          <li class="nav-item">
            <a
              id="schedule-tab"
              class="nav-link link-dark py-3"
              data-bs-toggle="tab"
              href="#schedule"
              role="tab"
              aria-controls="schedule"
              aria-selected="false">
              常見問題
            </a>
          </li>
          <li class="nav-item">
            <a
              id="message-tab"
              class="nav-link link-dark py-3"
              data-bs-toggle="tab"
              href="#message"
              role="tab"
              aria-controls="message"
              aria-selected="false">
              留言
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="container my-5">
      <div class="row">
        <div class="col-lg-8">
          <div class="tab-content" id="myTabContent">
            <div
              class="tab-pane fade show active"
              id="info"
              role="tabpanel"
              aria-labelledby="info-tab">
              <Introduction></Introduction>
            </div>
            <div
              class="tab-pane fade"
              id="news"
              role="tabpanel"
              aria-labelledby="news-tab">
              <News></News>
            </div>
            <div
              class="tab-pane fade"
              id="schedule"
              role="tabpanel"
              aria-labelledby="schedule-tab">
              <Schedule></Schedule>
            </div>
            <div
              class="tab-pane fade"
              id="message"
              role="tabpanel"
              aria-labelledby="message-tab">
              <Message></Message>
            </div>
          </div>
          <div
            class="col-12 mb-5 d-block d-md-none">
            <Sponsor></Sponsor>
          </div>
          <Form class="d-lg-block"></Form>
        </div>
        <div
          class="col-4 mb-0 d-none d-md-block overflow-style">
          <Sponsor></Sponsor>
        </div>
      </div>
    </div>
    <div
      :class="{ 'd-none': isOpacity === 0 }"
      class="d-md-none my-2 position-sticky bottom-0">
      <button
        class="btn btn-yellow border-0 
        text-center w-100 btn-lg px-5"
        @click="scrollBottom"
      >贊助專案</button>
    </div>
  </main>
</template>

<script>
/* global $ */
import Tooltip from 'bootstrap/js/dist/tooltip';
import Introduction from '@/components/Introduction';
import News from '@/components/News';
import Schedule from '@/components/Schedule';
import Message from '@/components/Message';
import Sponsor from '@/components/Sponsor';
import Form from '@/components/Form';

export default {
  components:{
    Introduction,
    News,
    Message,
    Schedule,
    Sponsor,
    Form,
  },
  data() {
    return {
      scrollTop: null,
      isOpacity: 0,
      mainboxH: 0,
    }
  },
  mounted() {
    Array.from(document.querySelectorAll('[data-toggle="tooltip"]'))
    .forEach(tooltipNode => new Tooltip(tooltipNode));

    window.addEventListener('scroll', () => {
      this.scrollTop = document.documentElement.scrollTop;
      this.mainboxH = document.getElementById("myTabContent").offsetHeight;
      if (this.scrollTop > 680 && this.scrollTop < (680 + this.mainboxH)) {
        this.isOpacity = 1;
      } else {
        this.isOpacity = 0;
      }
    });
  },
  methods: {
    scrollBottom() {
      $('html ,body').animate({
        scrollTop: 9999,
      });
    },
  }
}
</script>

